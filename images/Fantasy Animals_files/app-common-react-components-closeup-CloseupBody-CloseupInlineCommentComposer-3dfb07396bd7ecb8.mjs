"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[68357],{991354:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var i=n(667294),a=n(545007),r=n(883119),o=n(622468),s=n(642593),m=n(367131),_=n(573706),l=n(194093),c=n(476198),d=n(144326),g=n(267005),u=n(901450),p=n(383399),f=n(733383),A=n(115642),y=n(642758),C=n(785893);function S({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:n,disablePhotoCommentSelection:S,isEligibleForPinReactions:h,isPDP:E,orbacSubjectId:x,pinId:D,privatePin:L,reactionByMe:N,reactionCounts:P,setIsLoadingNewlyCreatedComment:Z,showCommentComposer:O,showReactBackground:j,storyPinDataId:I,viewParameter:b}){let v;let w=(0,d.ZP)(),B=(0,p.Z)(),T=(0,a.I0)(),{logContextEvent:k}=(0,_.v)(),M=(0,o.Z)(),{showOneToast:U}=(0,u.F9)(),{inCommentFooterRedesignExp:z,closeupWithinMasonryEnabled:H,peekCloseupEnabled:K,clientTrackingParams:R}=(0,A.x4)(),[W,F]=(0,i.useState)(!1),[J,G]=(0,i.useState)(s.A9.NONE);v=E?H?2:8:H?1:0;let q=E?z?8:6:0;async function Q(n){let{commentMedia:i,contentMarkdown:a,force:r,imageSignatures:o,tags:m}=n;if(null===e)return!1;Z(!0);try{if(e){if(o.length){let t={aggregatedPinDataId:e,details:a,image_signatures:o,pin_id:D??"",username:B.username||"",fromUnifiedComment:!0};await T((0,y.DD)(t))}else await M({commentMedia:i,force:r,fromUnifiedComment:!0,objectType:f.o.pin,objectId:e,pinId:D,tags:m,text:a,orbacSubjectId:x});k({event_type:7,clientTrackingParams:R,object_id_str:D,aux_data:{num_user_mention_tags:(m?JSON.parse(m):[]).length,...I?{creator_id:t,story_pin_data_id:I}:{}}})}}catch(e){return[g.ky,g.LJ].includes((0,l.Z)(e,"api_error_code")??0)?G((0,l.Z)(e,"api_error_code")===g.ky?s.A9.WARNING:s.A9.BLOCK):U(({hideToast:t})=>(0,C.jsx)(c.ZP,{onHide:t,text:(0,l.Z)(e,"message_detail")||(0,l.Z)(e,"message")||w._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),Z(!1),!1}return F(!1),Z(!1),!0}let{marginEnd:V,marginStart:X}=K?{marginEnd:4,marginStart:4}:H?{marginEnd:2,marginStart:2}:{marginEnd:v,marginStart:q};return(0,C.jsx)(r.xu,{marginEnd:V,marginStart:X,children:(0,C.jsx)(m.Z,{clientTrackingParams:R,commentCount:n,commentWarningModalState:J,disablePhotoCommentSelection:S,dismissCommentWarningModal:()=>G(s.A9.NONE),iconSize:E?20:void 0,isEligibleForPinReactions:h,isLeftAligned:E,objectType:f.o.pin,onAddItem:Q,onCancelItem:()=>F(!1),onEnter:()=>F(!0),pinId:D,privatePin:L,reactionByMe:N,reactionCounts:P,showCommentComposer:O,showReactBackground:!E&&j,statusType:W?"textInflightCreation":"textStaticDisplay",viewParameter:b})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-3dfb07396bd7ecb8.mjs.map